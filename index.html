<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>壽司郎精算師</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ... (中間的 HTML 結構完全不用變，為了節省篇幅省略) ... -->

<!-- FLOATING TIMER BUTTON -->
<div class="floating-btn timer-btn-float" onclick="handleTimer()">
    <span id="timer-icon">⏱️</span>
    <span id="timer-text" style="display:none; margin-left:5px;"></span>
</div>

<!-- FLOATING RESET BUTTON -->
<div class="floating-btn reset-btn-float" onclick="handleReset()">
    <span id="reset-icon">🔄</span>
    <span id="reset-text" style="display:none; margin-left:5px;">確定清空?</span>
</div>

<!-- TOAST -->
<div id="toast">請先點餐！🍣</div>

<!-- HEADER -->
<header>
    <a href="https://sushirohk.com.hk/tc/menu.php?wid=5&cid=13" target="_blank" class="header-btn menu-link">📝 菜單</a>
    <h1>🍣 SUSHIRO精算師</h1>
    <div class="header-btn disclaimer-link" onclick="openDisclaimer()">⚠️ 免責</div>
</header>

<!-- SCROLLABLE CONTENT -->
<div class="scroll-container">
    <div class="content-wrapper">
        <div id="plate-grid"></div>
        <div class="preset-title">快速點餐</div>
        <div class="preset-grid">
            <button class="preset-btn" onclick="addCustomItem(10)">$10</button>
            <button class="preset-btn" onclick="addCustomItem(13)">$13</button>
            <button class="preset-btn" onclick="addCustomItem(18)">$18</button>
            <button class="preset-btn" onclick="addCustomItem(19)">$19</button>
            <button class="preset-btn" onclick="addCustomItem(20)">$20</button>
            <button class="preset-btn" onclick="addCustomItem(27)">$27</button>
            <button class="preset-btn" onclick="addCustomItem(28)">$28</button>
            <button class="preset-btn" onclick="addCustomItem(32)">$32</button>
            <button class="preset-btn" onclick="addCustomItem(33)">$33</button>
            <button class="preset-btn" onclick="addCustomItem(39)">$39</button>
        </div>
        <div id="custom-grid"></div>
        <div class="add-btn-container" onclick="addCustomItem(null)">+ 加入自訂金額</div>
        <div class="settings-area">
            <div class="setting-row">
                <span style="font-weight:700; color:var(--text-main);">加一服務費 (+10%)</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="service-charge" checked onchange="calculateTotal()">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-row">
                <span style="font-weight:700; color:var(--text-main);">用餐人數</span>
                <div class="qty-control" style="width: 110px;">
                    <button class="qty-btn" onclick="changePeople(-1)">-</button>
                    <input type="number" id="people" class="qty-input" value="1" min="1" oninput="calculateTotal()">
                    <button class="qty-btn" onclick="changePeople(1)">+</button>
                </div>
            </div>
        </div>
        <div style="height: 20px;"></div>
    </div>
</div>

<!-- FIXED FOOTER -->
<div class="fixed-footer">
    <div class="bill-summary">
        <div class="bill-left">
            <span class="stats-badge">總數: <span id="total-count">0</span> 碟</span>
            <span>小計: <span id="subtotal-txt">$0</span></span>
            <span id="service-txt" style="font-size: 0.8rem; color:#888;">服務費: $0</span>
        </div>
        <div class="bill-right">
            <span class="stats-badge" style="background:#FFF0F0; color:var(--brand-red);">人均 <span id="avg-count">0</span> 碟</span>
            <div class="bill-total" id="total-txt">HK$ 0.00</div>
            <div class="bill-aa">AA制: <span id="aa-txt">$0</span></div>
        </div>
    </div>
    <button class="whatsapp-btn" onclick="sendWhatsApp()">
        <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413Z"/></svg>
        <span>Send WhatsApp 收錢</span>
    </button>
</div>

<!-- DISCLAIMER MODAL -->
<div id="disclaimer-modal" class="modal-overlay" onclick="closeDisclaimer(event)">
    <div class="modal-content">
        <span class="modal-close-x" onclick="closeDisclaimer(event, true)">×</span>
        <div class="disclaimer-text" id="disclaimer-body"></div>
        <button onclick="closeDisclaimer(event, true)" style="width:100%; padding:12px; background:var(--brand-red); color:white; border:none; border-radius:8px; font-weight:bold; font-size:1rem;">我明白了</button>
    </div>
</div>

<!-- ⚠️ 關鍵順序：先引入內容，再引入邏輯 -->
<script src="content.js"></script>
<script src="script.js"></script>

</body>
</html>
